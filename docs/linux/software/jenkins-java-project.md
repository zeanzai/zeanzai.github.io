---
title: "后端系统自动部署"
category:
  - "linux"
tag:
  - "software"
---

## 1. 基本信息

### 1.1. 概述

jenkins是一个持续集成开发工具。后端配置好构建流程后，只需要每次在界面上点击“构建”按钮，即可完成部署过程，操作简单明了。

其基本工作原理是先将svn上面的源码update到测试环境，然后通过通过执行相关命令实现部署。等同于把人工做的事情做了。

### 1.2. 信息

关于jenkins的地址信息及用户信息，在分享的腾讯共享文档中。

## 2. 配置过程

### 2.1. 初次部署

所谓初次部署是指，新开发了一个java后端系统，这个系统之前并没有在测试环境（即公司200服务器）中部署过，是第一次部署。

初次部署需要在jenkins上面配置构建流程，配置好构建流程后，之后的每次构建就比较方便了。

初次构建流程如下：

#### 2.1.1. 新建任务

点击左上角“新建任务”按钮，输入任务名称（一般情况为java后端的项目名称），再选择“构建一个自由风格的软件项目”，点击确定。

#### 2.1.2. 构建过程

在第一步点击“确定”按钮之后，出现的界面就是项目的构建过程，也是本次操作的重点。
首先，填写描述（一般情况为对项目的一些备注，如“这是校园云平台项目的测试部署”等，当然也可以不用填写），然后选中“丢弃旧的构建”，“	保持构建的天数”和“保持构建的最大个数”均填写2；

在“源码管理”内容栏里，选中subversion，然后拷贝项目源码的svn路径到“Repository URL”，“Credentials”选择“icwxy/**********”的那一项；

在“构建”内容栏里先选择“调用顶层maven目标”，maven选择“Apache-maven-3.5.4”，目标填写“clean package -DskipTests”，然后同样在“构建”内容栏内再选择“执行shell”，命令使用填写 “cp target/*.war /usr/setup/latestTomcat/webapps/”；

最后点击保存+应用。

#### 2.1.3. 构建

点击保存之后，会进入首页，首页上面会出现所有的任务列表，然后选中要构建的那条记录，点击最右面的构建按钮，进行构建。

#### 2.1.4. 一个完成的示例

请使用共享文档中的账户登录，编辑 school-hydroelectricity 项目进行查看具体的设置。

#### 2.1.5. 问题

初次构建时，maven会根据pom文件来下载相关依赖，会比较慢一些，也可能会出现一些权限问题。

### 2.2. 再次部署

之后，每一次构建都只需要将自己的代码提交到svn，然后执行初次部署的“构建”过程即可。
<img style="border:1px red solid; display:block; margin:0 auto;" :src="$withBase('/qrcode.jpg')" alt="微信公众号" />
