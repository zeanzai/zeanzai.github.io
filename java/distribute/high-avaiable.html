<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.38" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://zeanzai.me/java/distribute/high-avaiable.html"><meta property="og:site_name" content="天晴小猪"><meta property="og:title" content="系统高可用设计研究"><meta property="og:type" content="article"><meta property="og:updated_time" content="2023-02-12T10:33:33.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:tag" content="高可用"><meta property="article:modified_time" content="2023-02-12T10:33:33.000Z"><link rel="stylesheet" href="//at.alicdn.com/t/font_2410206_mfj6e1vbwo.css"><title>系统高可用设计研究 | 天晴小猪</title><meta name="description" content="天晴小猪 | 关于后端与架构设计 | Software Engineer | Backend | JAVA | DevOps | Linux | IDEA | Microservice | 我活在世上，无非想要明白些道理，遇见些有趣的事。倘能如我所愿，我的一生就算成功。">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.fac109b7.css">
    <link rel="modulepreload" href="/assets/app.6dea94d5.js"><link rel="modulepreload" href="/assets/high-avaiable.html.02a13289.js"><link rel="modulepreload" href="/assets/high-avaiable.html.76f00256.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc sidebar-open"><!--[--><header class="navbar"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><a href="/" class="home-link"><img class="logo" src="/logo.JPG" alt="天晴小猪"><!----><span class="site-name hide-in-pad">天晴小猪</span><!--[--><!----><!--]--></a><nav class="nav-links" style=""><div class="nav-item hide-in-mobile"><a href="/linux/" class="nav-link" aria-label="开发环境手册"><i class="icon iconfont icon-customize"></i>开发环境手册<!----></a></div><div class="nav-item hide-in-mobile"><a href="/resume/" class="nav-link" aria-label="面试前准备"><i class="icon iconfont icon-support"></i>面试前准备<!----></a></div><div class="nav-item hide-in-mobile"><a href="/java/" class="nav-link active" aria-label="Java"><i class="icon iconfont icon-java"></i>Java<!----></a></div><div class="nav-item hide-in-mobile"><a href="/shared/" class="nav-link" aria-label="资源共享"><i class="icon iconfont icon-page"></i>资源共享<!----></a></div><div class="nav-item hide-in-mobile"><a href="/springcloud-alibaba/" class="nav-link" aria-label="SpringCloud-Alibaba"><i class="icon iconfont icon-code"></i>SpringCloud-Alibaba<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="副业之路"><span class="title"><i class="icon iconfont icon-java"></i>副业之路</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/slashteen/web/" class="nav-link" aria-label="网站建设"><i class="icon iconfont icon-page"></i>网站建设<!----></a></li></ul></button></div></div></nav><div class="nav-actions-wrapper"><!--[--><!----><!--]--><div class="nav-item"><!----></div><div class="nav-item"><a class="repo-link" href="https://github.com/zeanzai/zeanzai.github.io" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" aria-labelledby="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><title id="github" lang="en">github icon</title><g fill="currentColor"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></g></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" aria-labelledby="auto" style="display:block;"><title id="auto" lang="en">auto icon</title><g fill="currentColor"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" aria-labelledby="dark" style="display:none;"><title id="dark" lang="en">dark icon</title><g fill="currentColor"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" aria-labelledby="light" style="display:none;"><title id="light" lang="en">light icon</title><g fill="currentColor"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></g></svg></button></div><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button><!--[--><!----><!--]--></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">一、计算机基础</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">二、JavaCore</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">三、框架</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">四、中间件</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">五、分布式</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/java/distribute/distribute-system-theory.html" class="nav-link sidebar-link sidebar-page" aria-label="分布式基本原理"><!---->分布式基本原理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/distribute/cache.html" class="nav-link sidebar-link sidebar-page" aria-label="分布式缓存"><!---->分布式缓存<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/distribute/hash.html" class="nav-link sidebar-link sidebar-page" aria-label="一致性Hash"><!---->一致性Hash<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/distribute/transaction.html" class="nav-link sidebar-link sidebar-page" aria-label="分布式事务"><!---->分布式事务<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/distribute/seataTCC/SeataTCC.html" class="nav-link sidebar-link sidebar-page" aria-label="Seata TCC分布式事务"><!---->Seata TCC分布式事务<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/distribute/distribute-lock.html" class="nav-link sidebar-link sidebar-page" aria-label="分布式锁"><!---->分布式锁<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/distribute/sharding.html" class="nav-link sidebar-link sidebar-page" aria-label="分库分表"><!---->分库分表<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/distribute/distribute-id.html" class="nav-link sidebar-link sidebar-page" aria-label="分布式ID"><!---->分布式ID<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">分布式消息</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><a aria-current="page" href="/java/distribute/high-avaiable.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="系统高可用设计研究"><!---->系统高可用设计研究<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/distribute/high-avaiable.html#高可用系统设计" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="高可用系统设计"><!---->高可用系统设计<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/distribute/high-avaiable.html#系统不可用的背景" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="系统不可用的背景"><!---->系统不可用的背景<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/distribute/high-avaiable.html#系统不可用的原因分析" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="系统不可用的原因分析"><!---->系统不可用的原因分析<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/distribute/high-avaiable.html#系统可用性的评判标准" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="系统可用性的评判标准"><!---->系统可用性的评判标准<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/distribute/high-avaiable.html#如何保证系统可用性" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="如何保证系统可用性"><!---->如何保证系统可用性<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/distribute/high-avaiable.html#前端高可用保证手段" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="前端高可用保证手段"><!---->前端高可用保证手段<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/distribute/high-avaiable.html#后端高可用的保证手段" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="后端高可用的保证手段"><!---->后端高可用的保证手段<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/distribute/high-avaiable.html#数据库的高可用保证手段" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="数据库的高可用保证手段"><!---->数据库的高可用保证手段<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/distribute/high-avaiable.html#其他高可用手段" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="其他高可用手段"><!---->其他高可用手段<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/distribute/high-avaiable.html#总结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="总结"><!---->总结<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">六、源码系列</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">七、项目实战</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">八、学习笔记</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">九、工作技巧</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->系统高可用设计研究</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" aria-labelledby="author"><title id="author" lang="en">author icon</title><g fill="currentColor"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></g></svg><span><a class="author-item" href="https://zeanzai.me" target="_blank" rel="noopener noreferrer">天晴小猪</a></span><span property="author" content="天晴小猪"></span></span><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" aria-labelledby="calendar"><title id="calendar" lang="en">calendar icon</title><g fill="currentColor"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></g></svg><span>2023年2月12日</span><meta property="datePublished" content="2023-02-12T10:33:33.000Z"></span><span class="category-info" aria-label="分类🌈" data-balloon-pos="down" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" aria-labelledby="category"><title id="category" lang="en">category icon</title><g fill="currentColor"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></g></svg><ul class="categories-wrapper"><li class="category category7 clickable" role="navigation">distribute</li><meta property="articleSection" content="distribute"></ul></span><span aria-label="标签🏷" data-balloon-pos="down" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" aria-labelledby="tag"><title id="tag" lang="en">tag icon</title><g fill="currentColor"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></g></svg><ul class="tags-wrapper"><li class="tag tag2 clickable" role="navigation">高可用</li></ul><meta property="keywords" content="高可用"></span><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" aria-labelledby="timer"><title id="timer" lang="en">timer icon</title><g fill="currentColor"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></g></svg><span>大约 9 分钟</span><meta property="timeRequired" content="PT9M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc-list"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/distribute/high-avaiable.html#高可用系统设计" class="router-link-active router-link-exact-active toc-link level2">高可用系统设计</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/distribute/high-avaiable.html#系统不可用的背景" class="router-link-active router-link-exact-active toc-link level3">系统不可用的背景</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/distribute/high-avaiable.html#系统不可用的原因分析" class="router-link-active router-link-exact-active toc-link level3">系统不可用的原因分析</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/distribute/high-avaiable.html#系统可用性的评判标准" class="router-link-active router-link-exact-active toc-link level3">系统可用性的评判标准</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/distribute/high-avaiable.html#如何保证系统可用性" class="router-link-active router-link-exact-active toc-link level3">如何保证系统可用性</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/distribute/high-avaiable.html#前端高可用保证手段" class="router-link-active router-link-exact-active toc-link level3">前端高可用保证手段</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/distribute/high-avaiable.html#后端高可用的保证手段" class="router-link-active router-link-exact-active toc-link level3">后端高可用的保证手段</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/distribute/high-avaiable.html#数据库的高可用保证手段" class="router-link-active router-link-exact-active toc-link level3">数据库的高可用保证手段</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/distribute/high-avaiable.html#其他高可用手段" class="router-link-active router-link-exact-active toc-link level3">其他高可用手段</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/distribute/high-avaiable.html#总结" class="router-link-active router-link-exact-active toc-link level3">总结</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!--[--><h2 id="高可用系统设计" tabindex="-1"><a class="header-anchor" href="#高可用系统设计" aria-hidden="true">#</a> 高可用系统设计</h2><p>我们一直在谈系统要支持高可用，但是很多人都不知道什么是高可用、哪些原因会造成系统不可用，更不要说有哪些手段可以使系统变的高可用。 我们今天来聊一聊这个话题。</p><h3 id="系统不可用的背景" tabindex="-1"><a class="header-anchor" href="#系统不可用的背景" aria-hidden="true">#</a> 系统不可用的背景</h3><p>在计算机发展前期，我们只能使用单机软件，这些单机软件只服务于使用个人计算机的用户，用户想要使用服务，就要去官网下载对应的软件，然后安装到个人计算机上，这就是最原始的计算机软件的使用方式，也是最原始的CS模式（Client/Server）的软件使用方式，可这种方式会造成一些问题，比如说针对个人应用的软件，当软件系统推送应用升级的消息给用户时，就会有人选择不升级，这就造成了某些业务无法覆盖到全体用户，软件制造商也就需要同时维护不同版本的软件，这会造成企业研发成本的严重浪费；再比如说，针对企业提供服务的软件，软件制造商还需要额外提供人力去企业现场提供升级维护服务，这也会产生了巨大的人力成本。但是，随着计算机网络的发展，针对这些问题，人们提出了一种新的软件服务方式，也就是现在大家经常使用到的BS（Browser/Server）模式的软件服务形式，这种服务模式通俗点讲，就是统一提供一个web网站，所有的用户都使用同一个网站，这样软件制造商就可以只维护一套代码，升级维护问题也迎刃而解。但BS模式运行一段时间后，人们发现用户越来越多，用户产生的数据也越来越多，经常会出现系统不可用的现象，于是人们开始针对这个问题进行研究。</p><h3 id="系统不可用的原因分析" tabindex="-1"><a class="header-anchor" href="#系统不可用的原因分析" aria-hidden="true">#</a> 系统不可用的原因分析</h3><p>研究系统不可用现象时，可以从系统的部署模型去探讨。系统的部署模型无非就四部分内容，用户、硬件、软件和连接设备。下面我们分别从这几个方面讨论一下造成系统不可用的原因。在软件方面，比如有些代码写的不够健壮，系统运行一段时间后代码问题暴露出来，这会造成系统不可用；应用系统的某个节点### 包括应用系统某个模块和应用系统所使用的中间件突然出现问题，不再对外提供服务也会造成系统不可用；在连接设备方面，计算机网络抖动造成服务不够稳定，时而提供服务时而不提供服务，也会造成系统不可用；在硬件方面，计算机硬件设备出现故障，导致整个服务器宕机，也会造成系统不可用；在用户方面，会出现网络黑客攻击、用户量激增、自然灾害造成机房损毁、人为破坏服务器等也会造成系统不可用。</p><h3 id="系统可用性的评判标准" tabindex="-1"><a class="header-anchor" href="#系统可用性的评判标准" aria-hidden="true">#</a> 系统可用性的评判标准</h3><p>BS模式发展过程中并不是立刻就有理论支撑的，人们为了快速占领市场先机，都是先把项目上马，然后人们遇到一个问题就解决一个问题，后来人们说没有理论不行呀，于是人们就提出系统可用性的评判标准。所谓系统可用性的评判标准就是，一个系统正常运行的时间占全年时间的百分比，如百分之九十九点九九九，也就是五个“九”的标准，代表着全年中有百分之九十九点九九九的时间，系统是正常运行的时间，一年按照365天来算，也就是大概会有半分钟的不可用时间。现在互联网大厂中的系统可用时间大多在五个“九”、六个“九”的标准，并且这些指标都与程序员的绩效考核挂钩。总之，系统可用性的评判标准就是系统全年可用时间的百分比。知道了系统可用性的评判标准后，现在我们需要从另外一个角度分析出软件过程中所有可能会造成系统不可用原因，然后针对这些原因逐一解决。</p><h3 id="如何保证系统可用性" tabindex="-1"><a class="header-anchor" href="#如何保证系统可用性" aria-hidden="true">#</a> 如何保证系统可用性</h3><p>我们假设系统硬件和系统网络可用性为百分之百，这样我们就可以只需要保证用户侧和软件侧的可用性，就可以满足系统高可用的目标。实际上，系统硬件和系统网络出现问题的概率本身就很低，几乎可以忽略不计，而用户侧造成系统不可用的原因，可以通过解决其他三方面的问题来解决。因此保证系统高可用就变成了如何保证软件系统高可用的问题。这里我们可以从系统的技术架构方面来探讨。系统的技术架构主要包括三个方面：前端、后端和数据库。在探讨保证系统高可用之前，我们要先探讨一下每一部分所面临的挑战。前端是所有用户的入口，它所面临的挑战是瞬间大流量；后端是对外提供服务的载体，它所面临的主要问题是用户大量请求所产生的高并发；而数据库是整个系统的基石，它所面临的主要挑战是后端发来的大量的读写请求。有了这个思路，我们就可以针对每一个挑战来提出解决方案。</p><h3 id="前端高可用保证手段" tabindex="-1"><a class="header-anchor" href="#前端高可用保证手段" aria-hidden="true">#</a> 前端高可用保证手段</h3><p>前端是用户的入口，也是所有流量的入口，我们自然而然想到把集中的流量打散就可以解决问题，因此，前端的主要目标就是打散流量，主要有两种手段：一种是集群模式，这种方式很好理解，说白了就是简单的增加服务器，如果系统同时访问的用户请求峰值有10万，假如只有两台服务器，那每台服务器要承担的请求是5w，如果把服务器增加到10台，同时配上负载均衡相关的组件，理论上，每台服务器就可以只承担1万请求，这就达到打散流量的目的了。另一种是动静分离，也就是说把动态资源和静态资源进行分离，用户直接从服务器上获取动态资源，而静态资源则放到CDN上，让用户从离自己最近的服务器上获取这些不变的数据资源，这也能达到打散流量的目的。</p><h3 id="后端高可用的保证手段" tabindex="-1"><a class="header-anchor" href="#后端高可用的保证手段" aria-hidden="true">#</a> 后端高可用的保证手段</h3><p>后端是对外提供服务的载体，主要挑战是大量用户请求所产生的高并发和由高并发引起的服务雪崩等问题，因此后端高可用的主要目标是限制流量、提高响应速度和隔离风险。限制流量可以采用网景的hystrix或阿里的Sentinel等服务组件；提高响应速度，可以采用本地缓存与分布式缓存并存的方式；隔离风险，可以采取权限校验、服务隔离、业务隔离、中间件隔离、数据库隔离等方式。后端高可用是保证整个系统高可用的重点，所遇到的问题和所使用的技术都是层出不穷的。并且，后端保证高可用的具体操作方案还需要根据具体的业务规则及系统架构来分析，我们这里只提供一些通用的解决问题的思路，但是不管怎样，后端高可用的主要目标和保证高可用的手段是万变不离其宗的。</p><h3 id="数据库的高可用保证手段" tabindex="-1"><a class="header-anchor" href="#数据库的高可用保证手段" aria-hidden="true">#</a> 数据库的高可用保证手段</h3><p>数据库是承载所有用户数据的地方，其地位不亚于后端服务系统，其所遇到的挑战除了高并发外，还有数据一致性问题的保证。针对高并发问题，我们可以在数据库侧采用分库分表、集群模式、读写分离的方式进行保证；针对数据一致性问题，我们需要根据具体的业务场景进行具体的分析，但如果后端使用了本地缓存与分布式缓存并存的方式，我们需要考虑这三方存储的数据一致性问题，一般是使用CacheAside模式。除此以外，还需要考虑前期系统设计方面的问题，即怎样设计出更能满足高可用目标的数据库表结构等。</p><h3 id="其他高可用手段" tabindex="-1"><a class="header-anchor" href="#其他高可用手段" aria-hidden="true">#</a> 其他高可用手段</h3><p>除上述我们讲到的前端、后端及数据库三个方面的高可用保证手段外，还有为后端系统预热防止打死数据库，前后端开发保证高质量的代码，数据库保证高质量的sql脚本，测试阶段追求更高的测试覆盖率，运维为系统添加冗余以便出现问题后迅速切换、搭建完备的风险监控系统及日志监控系统都是保证系统高可用的手段。当然考虑这些时要根据企业的经济效益来考虑是否采用，这些保证手段也不是一下子全部都要用，而是在系统发展过程中不断完善的。</p><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h3><p>整个视频合集，我们先是从系统不可用的背景进行切入，了解到系统不可用的根本原因是计算机应用的不断发展过程中遇到了各种各样的问题；其次我们从部署模型的视角，分析了系统有哪些不可用原因；再其次我们又提出了系统高可用的评判标准，最后我们又从技术架构的视角分析了系统高可用的保证手段。总而言之，如何设计一个高可用系统是一个复杂的问题，需要我们注意到应用系统的方方面面。当然上述视频中可能还会有其他暂时没有考虑到的问题，这就需要我们在业务迭代过程中不断进行发展和优化。此外，整个问题研究透彻之后，大家会发现计算机的发展之路其实就是不断发现问题并不断解决问题的道路，从另外一个角度来看，这也给我们学习计算机软件编程提供了思路。 <img style="border:1px red solid;display:block;margin:0 auto;" src="/qrcode.jpg" alt="微信公众号"></p><!--]--></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/zeanzai/zeanzai.github.io/edit/main/docs/java/distribute/high-avaiable.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" aria-labelledby="edit"><title id="edit" lang="en">edit icon</title><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2023/2/12 10:33:33</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: zeanzai.me@gmail.com">Shawn Wang</span><!--]--><!--]--></div></footer><!----><div class="giscus-wrapper input-top" style="display:block;"><giscus-widget repo="zeanzai/zeanzai.github.io" repoId="R_kgDOIf9ChQ" category="Announcements" categoryId="DIC_kwDOIf9Chc4CSwDh" lang="zh-CN" theme="light" mapping="pathname" inputPosition="top" reactionsEnabled="1" emitMetadata="0"></giscus-widget></div><!----></main><!--]--><footer class="footer-wrapper"><div class="footer">浪漫骑士的二流键盘</div><div class="copyright">Copyright © 2023 天晴小猪</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.6dea94d5.js" defer></script>
  </body>
</html>
