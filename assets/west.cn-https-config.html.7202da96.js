import{e}from"./app.711f9a91.js";import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";const a={},s=e(`<h2 id="_1-https\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_1-https\u914D\u7F6E" aria-hidden="true">#</a> 1. https\u914D\u7F6E</h2><h3 id="_1-1-\u73AF\u5883" tabindex="-1"><a class="header-anchor" href="#_1-1-\u73AF\u5883" aria-hidden="true">#</a> 1.1. \u73AF\u5883</h3><p>\u817E\u8BAF\u4E91\u4E3B\u673A\uFF1Acentos7</p><p>\u897F\u90E8\u6570\u7801\u57DF\u540D\u548C\u8BC1\u4E66</p><h3 id="_1-2-\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_1-2-\u573A\u666F" aria-hidden="true">#</a> 1.2. \u573A\u666F</h3><p>\u90E8\u7F72\u5C0F\u7A0B\u5E8F\u540E\u7AEF\uFF0C\u5E76\u914D\u7F6E\u5C0F\u7A0B\u5E8F\u7684HTTPS\u57DF\u540D\u3002</p><h3 id="_1-3-\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#_1-3-\u6B65\u9AA4" aria-hidden="true">#</a> 1.3. \u6B65\u9AA4</h3><h4 id="_1-3-1-\u7533\u8BF7ssl\u8BC1\u4E66" tabindex="-1"><a class="header-anchor" href="#_1-3-1-\u7533\u8BF7ssl\u8BC1\u4E66" aria-hidden="true">#</a> 1.3.1. \u7533\u8BF7ssl\u8BC1\u4E66</h4><p>\u521B\u5EFAssl\u7684\u8BC1\u4E66\uFF0C\u521B\u5EFA\u5B8C\u6210\u4E4B\u540E\u4ED8\u6B3E\u3001\u8865\u5168\u8BA4\u8BC1\u8D44\u6599\uFF0C\u5728\u57DF\u540D\u9A8C\u8BC1\u7C7B\u578B\u5904\u9009\u62E9\u201C\u6587\u4EF6\u9A8C\u8BC1\u201D\uFF1B</p><h4 id="_1-3-2-\u9A8C\u8BC1\u4E3B\u673A" tabindex="-1"><a class="header-anchor" href="#_1-3-2-\u9A8C\u8BC1\u4E3B\u673A" aria-hidden="true">#</a> 1.3.2. \u9A8C\u8BC1\u4E3B\u673A</h4><p>\u6839\u636E \u897F\u90E8\u6570\u7801 \u8BC1\u4E66\u5217\u8868\u754C\u9762\u4E0A\u8981\u6C42\u7684\u65B9\u5F0F\u8FDB\u884C\u914D\u7F6E\uFF0C\u9A8C\u8BC1\u4E3B\u673A\u5C5E\u4E8E\u57DF\u540D\u6240\u6709\u8005\u3002</p><h5 id="_1-3-2-1-\u914D\u7F6Enginx\u7684\u914D\u7F6E\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1-3-2-1-\u914D\u7F6Enginx\u7684\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> 1.3.2.1. \u914D\u7F6Enginx\u7684\u914D\u7F6E\u6587\u4EF6</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ vi /usr/setup/nginx-1.14.1/conf/vhost/test.domainname.com.conf
server {
    listen       80;
    server_name  test.domainname.com;
    location / {
            root   html/test;
            index  index.html index.htm;
    }
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   html;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="_1-3-2-2-\u521B\u5EFA\u6587\u4EF6\u5939" tabindex="-1"><a class="header-anchor" href="#_1-3-2-2-\u521B\u5EFA\u6587\u4EF6\u5939" aria-hidden="true">#</a> 1.3.2.2. \u521B\u5EFA\u6587\u4EF6\u5939</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ mkdir -p /usr/setup/nginx-1.14.1/html/test/.well-known/pki-validation
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="_1-3-2-3-\u521B\u5EFA\u6821\u9A8C\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1-3-2-3-\u521B\u5EFA\u6821\u9A8C\u6587\u4EF6" aria-hidden="true">#</a> 1.3.2.3. \u521B\u5EFA\u6821\u9A8C\u6587\u4EF6</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ vi /usr/setup/nginx-1.14.1/html/test/.well-known/pki-validation/fileauth.txt
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="_1-3-2-4-\u91CD\u542Fnginx" tabindex="-1"><a class="header-anchor" href="#_1-3-2-4-\u91CD\u542Fnginx" aria-hidden="true">#</a> 1.3.2.4. \u91CD\u542Fnginx</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ systemctl reload nginx
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u521D\u6B21\u90E8\u7F72\uFF0C\u9700\u8981\u5F00\u653E 80 \u7AEF\u53E3\u548C 443 \u7AEF\u53E3\u3002</p><h5 id="_1-3-2-5-\u7B49\u5F85" tabindex="-1"><a class="header-anchor" href="#_1-3-2-5-\u7B49\u5F85" aria-hidden="true">#</a> 1.3.2.5. \u7B49\u5F85</h5><p>\u7B49\u5F85\u5341\u5206\u949F\u5230\u4E8C\u5341\u5206\u949F\u540E\uFF0C\u8BC1\u4E66\u72B6\u6001\u7531 \u5BA1\u6838 \u72B6\u6001\u6539\u4E3A \u5B8C\u6210 \u72B6\u6001\u3002</p><h5 id="_1-3-2-6-\u914D\u7F6E\u57DF\u540D\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_1-3-2-6-\u914D\u7F6E\u57DF\u540D\u89E3\u6790" aria-hidden="true">#</a> 1.3.2.6. \u914D\u7F6E\u57DF\u540D\u89E3\u6790</h5><p>\u914D\u7F6E\u4E00\u4E2AA\u8BB0\u5F55\u7C7B\u578B\u7684\u57DF\u540D\u89E3\u6790\u3002</p><h5 id="_1-3-2-7-\u8BBF\u95EE\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_1-3-2-7-\u8BBF\u95EE\u6D4B\u8BD5" aria-hidden="true">#</a> 1.3.2.7. \u8BBF\u95EE\u6D4B\u8BD5</h5><p>\u8BBF\u95EE\uFF1A<code>http://test.domainname.com/.well-known/pki-validation/fileauth.txt</code></p><p>\u5728\u6D4F\u89C8\u5668\u4E2D\u8F93\u5165 <code>test.domainname.com</code> \u6D4B\u8BD5\u662F\u5426\u89E3\u6790\u6210\u529F\u3002</p><h4 id="_1-3-3-\u914D\u7F6Ehttps" tabindex="-1"><a class="header-anchor" href="#_1-3-3-\u914D\u7F6Ehttps" aria-hidden="true">#</a> 1.3.3. \u914D\u7F6Ehttps</h4><h5 id="_1-3-3-1-\u521B\u5EFA\u8BC1\u4E66\u6587\u4EF6\u5939" tabindex="-1"><a class="header-anchor" href="#_1-3-3-1-\u521B\u5EFA\u8BC1\u4E66\u6587\u4EF6\u5939" aria-hidden="true">#</a> 1.3.3.1. \u521B\u5EFA\u8BC1\u4E66\u6587\u4EF6\u5939</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ mkdir /usr/setup/nginx-1.14.1/conf/cert/test
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="_1-3-3-2-\u4E0B\u8F7D\u5E76\u5408\u5E76\u8BC1\u4E66" tabindex="-1"><a class="header-anchor" href="#_1-3-3-2-\u4E0B\u8F7D\u5E76\u5408\u5E76\u8BC1\u4E66" aria-hidden="true">#</a> 1.3.3.2. \u4E0B\u8F7D\u5E76\u5408\u5E76\u8BC1\u4E66</h5><ul><li>\u4E0B\u8F7D\u8BC1\u4E66\u5E76\u89E3\u538B</li></ul><p>\u627E\u5230\u8BC1\u4E66\u5217\u8868\u5BF9\u5E94\u7684\u8BC1\u4E66\uFF0C\u70B9\u51FB\u4E0B\u8F7D\uFF0C\u4E0B\u8F7D\u5B8C\u6210\u4E4B\u540E\u901A\u8FC7\u5BC6\u7801\u89E3\u538B</p><ul><li>\u5408\u5E76\u8BC1\u4E66</li></ul><p>\u89E3\u538B\u4E4B\u540E\uFF0C\u9700\u5C06 .cer \u6587\u4EF6\u4E2D\u7684\u5185\u5BB9\u590D\u5236\u5230 .crt \u6587\u4EF6\u5934\u90E8\uFF0C\u4E2D\u95F4\u4E0D\u8981\u6709\u7A7A\u884C</p><ul><li>\u4E0A\u4F20\u8BC1\u4E66</li></ul><p>\u5C06 .key \u3001 .cer \u3001 .crt \u4E09\u4E2A\u6587\u4EF6\u590D\u5236\u5230\u4E0A\u4E00\u6B65\u9AA4\u521B\u5EFA\u7684\u76EE\u5F55\u4E2D\u3002</p><h5 id="_1-3-3-3-\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1-3-3-3-\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> 1.3.3.3. \u4FEE\u6539\u914D\u7F6E\u6587\u4EF6</h5><p>\u5C06\u4E0A\u9762\u521B\u5EFA\u7684 test.domainname.conf \u7684\u6587\u4EF6\u4FEE\u6539\u4E3A\u4E0B\u9762\u7684\u5185\u5BB9\uFF0C\u4FEE\u6539\u5B8C\u6210\u540E\u91CD\u542F nginx \u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ vi /usr/setup/nginx-1.14.1/conf/vhost/test.domainname.com.conf

server {
    listen       80;
    server_name  test.domainname.com;

    location / {
        rewrite ^(.*) https://test.domainname.com/$1 permanent;
    }
}
server {
    listen       443 ssl;
    server_name  test.domainname.com;

    ssl_certificate      /usr/setup/nginx-1.14.1/conf/cert/test/test.domainname.com_ca.crt;
    ssl_certificate_key  /usr/setup/nginx-1.14.1/conf/cert/test/test.domainname.com.key;

    ssl_session_cache    shared:SSL:1m;
    ssl_session_timeout  5m;

    ssl_ciphers ALL:!DH:!EXPORT:!RC4:+HIGH:+MEDIUM:!LOW:!aNULL:!eNULL;
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
    ssl_prefer_server_ciphers  on;

    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real_IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}

$ systemctl reload nginx
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h5 id="_1-3-3-4-\u5220\u9664\u9A8C\u8BC1\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1-3-3-4-\u5220\u9664\u9A8C\u8BC1\u6587\u4EF6" aria-hidden="true">#</a> 1.3.3.4. \u5220\u9664\u9A8C\u8BC1\u6587\u4EF6</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ rm -rf test/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="_1-3-3-5-\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_1-3-3-5-\u6D4B\u8BD5" aria-hidden="true">#</a> 1.3.3.5. \u6D4B\u8BD5</h5><h2 id="\u6D4F\u89C8\u5668\u4E2D\u8F93\u5165-test-domainname-com-\u67E5\u770B\u662F\u5426\u81EA\u52A8\u8DF3\u8F6C\u5230https\u3002\u6210\u529F\u3002" tabindex="-1"><a class="header-anchor" href="#\u6D4F\u89C8\u5668\u4E2D\u8F93\u5165-test-domainname-com-\u67E5\u770B\u662F\u5426\u81EA\u52A8\u8DF3\u8F6C\u5230https\u3002\u6210\u529F\u3002" aria-hidden="true">#</a> \u6D4F\u89C8\u5668\u4E2D\u8F93\u5165 <code>test.domainname.com</code> \u67E5\u770B\u662F\u5426\u81EA\u52A8\u8DF3\u8F6C\u5230https\u3002\u6210\u529F\u3002</h2><img style="border:1px red solid;display:block;margin:0 auto;" src="https://tianqingxiaozhu.oss-cn-shenzhen.aliyuncs.com/img/qrcode.jpg" alt="\u5FAE\u4FE1\u516C\u4F17\u53F7">`,45);function r(i,t){return s}var c=n(a,[["render",r],["__file","west.cn-https-config.html.vue"]]);export{c as default};
